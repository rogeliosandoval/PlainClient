@if (!sharedService.hardLoading() && sharedService.showOverview()) {
  <div class="route-container" [style.background-color]="sharedService.darkMode() ? 'rgb(24, 24, 24)' : ''">
    <div class="first-widgets">
      <div class="total-clients small-widget" [style.background-color]="sharedService.darkMode() ? 'rgb(42, 42, 42)' : 'white'" [class.disabled]="sharedService.loading()">
        <i class="pi pi-users main-pi" style="background-color: rgb(191, 226, 255);"></i>
        <div class="small-widget__info">
          <strong>{{ authService.coreBusinessData()?.clients?.length }}</strong>
          <span>Total Clients</span>
        </div>
      </div>
      <div class="total-profits small-widget" [style.background-color]="sharedService.darkMode() ? 'rgb(42, 42, 42)' : 'white'" [class.disabled]="sharedService.loading()">
        <i class="pi pi-money-bill main-pi" style="background-color: rgb(206, 255, 205);"></i>
        <div class="small-widget__info">
          <strong>
            @if (sharedService.darkMode()) {
              <strong [style.color]="totalBusinessProfit() < 0 ? '#fc6363' : '#48df57'">{{ totalBusinessProfit() | currency:'USD'}}</strong>
            } @else {
              <strong [style.color]="totalBusinessProfit() < 0 ? 'red' : '#06a506'">{{ totalBusinessProfit() | currency:'USD'}}</strong>
            }
          </strong>
          <span>Business Profits (Mo)</span>
        </div>
        <!-- <i class="pi pi-ellipsis-h menu-pi" (click)="profitMenu.toggle($event);"></i> -->
        <!-- <p-menu #profitMenu [model]="profitOptions" popup="true" appendTo="body"/> -->
      </div>
      <div class="total-profits small-widget" [style.background-color]="sharedService.darkMode() ? 'rgb(42, 42, 42)' : 'white'" [class.disabled]="sharedService.loading()">
        <i class="pi pi-money-bill main-pi" style="background-color: rgb(206, 255, 205);"></i>
        <div class="small-widget__info">
          <strong>
            @if (sharedService.darkMode()) {
              <strong [style.color]="totalPersonalProfit() < 0 ? '#fc6363' : '#48df57'">{{ totalPersonalProfit() | currency:'USD'}}</strong>
            } @else {
              <strong [style.color]="totalPersonalProfit() < 0 ? 'red' : '#06a506'">{{ totalPersonalProfit() | currency:'USD'}}</strong>
            }
          </strong>
          <span>Personal Profits (Mo)</span>
        </div>
      </div>
      <div class="next-task small-widget" [style.background-color]="sharedService.darkMode() ? 'rgb(42, 42, 42)' : 'white'" [class.disabled]="sharedService.loading()">
        <i class="pi pi-list-check main-pi" style="background-color: rgb(255, 205, 205);"></i>
        <div class="small-widget__info">
          @if (getMostRecentIncompleteBusinessTask()) {
            <div class="task-note">{{ getMostRecentIncompleteBusinessTask().task | truncate: 32 }}</div>
          } @else {
            <strong [style.color]="sharedService.darkMode() ? '#37b6ff' : '#004aad'" style="font-size: 1.25rem;">All caught up! ðŸŽ‰</strong>
          }
          <span>Next Business Task</span>
        </div>
      </div>
      <div class="next-task small-widget" [style.background-color]="sharedService.darkMode() ? 'rgb(42, 42, 42)' : 'white'" [class.disabled]="sharedService.loading()">
        <i class="pi pi-list-check main-pi" style="background-color: rgb(255, 205, 205);"></i>
        <div class="small-widget__info">
          @if (getMostRecentIncompletePersonalTask()) {
            <div class="task-note">{{ getMostRecentIncompletePersonalTask().task | truncate: 35 }}</div>
          } @else {
            <strong [style.color]="sharedService.darkMode() ? '#37b6ff' : '#004aad'" style="font-size: 1.25rem;">All caught up! ðŸŽ‰</strong>
          }
          <span>Next Personal Task</span>
        </div>
      </div>
      <div class="notifications small-widget" [style.background-color]="sharedService.darkMode() ? 'rgb(42, 42, 42)' : 'white'" [class.disabled]="sharedService.loading()">
        <i class="pi pi-bell main-pi" style="background-color: rgb(255, 239, 205);"></i>
        <div class="small-widget__info">
          <strong>0 New</strong>
          <span>Notifications</span>
        </div>
      </div>
    </div>
    <div class="chart-container" [class.disabled]="sharedService.loading()" [style.background-color]="sharedService.darkMode() ? 'rgb(42, 42, 42)' : 'white'">
      <canvas [class.disabled]="chartIsUpdating()" id="incomeExpenseChart"></canvas>
      @if (chartIsUpdating()) {
        <p-progressSpinner class="chart-spinner" ariaLabel="loading" strokeWidth="8" fill="transparent" animationDuration=".5s" [style]="{ width: '50px', height: '50px' }"/>
      }
    </div>
  </div>
}