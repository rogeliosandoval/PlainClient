<div class="route-container" [class.disabled]="sharedService.loading()">
  <div class="tab-menu">
    <p-tabMenu [model]="items" [(activeItem)]="activeItem"/>
    @if (sharedService.userProfits().length !== 0 && !showBusinessProfits()) {
      <p-button label="Add Income/Expense +" (onClick)="showProfitFormDialog.set(true); databaseType.set('business'); logicType.set('add')"></p-button>
    }
  </div>
  @if (showBusinessProfits()) {
    <div class="no-profits">
      <img src="/assets/images/money-stacks.webp" alt="no profits" draggable="false" width="230" height="205" priority>
      <span>Keep track of your business expesnes!</span>
      <p-button label="Add Income/Expense +" (onClick)="showProfitFormDialog.set(true); databaseType.set('business'); logicType.set('add')"></p-button>
    </div>
  } @else {
    @if (sharedService.userProfits().length === 0) {
      <div class="no-profits">
        <img src="/assets/images/wallet.webp" alt="no profits" draggable="false" width="186" height="200" priority>
        <span>Keep track of your personal expenses!</span>
        <p-button label="Add Income/Expense +" (onClick)="showProfitFormDialog.set(true); databaseType.set('personal'); logicType.set('add')"></p-button>
      </div>
    } @else {
      <div class="profit-container">
        <div class="profit-items">
          @for (item of sharedService.userProfits(); track item.id) {
            <div class="profit-item" [class.profit-item-dark]="sharedService.darkMode()">
              @if (!sharedService.darkMode()) {
                <div class="profit-item__expense" [style.color]="item.profitType === 'Expense' ? 'red' : '#06a506'">${{ item.amount }}</div>
              } @else {
                <div class="profit-item__expense" [style.color]="item.profitType === 'Expense' ? '#fc6363' : '#48df57'">${{ item.amount }}</div>
              }
              <div class="profit-item__name">{{ item.name }}</div>
              <div class="profit-item__note">{{ item.note }}</div>
              <i class="pi pi-ellipsis-h" (click)="menu.toggle($event); profitItemData = item"></i>
            </div>
          }
          <p-menu #menu [model]="profitOptions" popup="true" appendTo="body"/>
        </div>
        <div class="profit-summary">
          <div class="profit-summary-clipboard" [class.profit-summary-clipboard-dark]="sharedService.darkMode()">
            <div class="profit-summary-clipboard--title">Monthly Report</div>
          </div>
        </div>
      </div>
    }
  }
</div>
<tcd-profit-form #profitFormDialog [showProfitFormDialog]="showProfitFormDialog()" (onClose)="onDialogClose($event)" (onSubmit)="triggerProfitForm($event)" [dialogLoading]="dialogLoading" [logicType]="logicType()" [profitItemData]="profitItemData"></tcd-profit-form>